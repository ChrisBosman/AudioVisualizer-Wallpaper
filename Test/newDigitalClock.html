<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="../Styles/dateTime.css">

    <style>
    </style>
</head>
<body>
    <div class="timeCenterContainer" style="opacity: 1;">
        <div class="flipClock" style="display: flex;">
            <div class="flipper" id="flipper1">
                <div class="flipperTop newFlipperTop"><div>0</div></div>
                <div class="flipperTop"><div>0</div></div>
                <div class="flipperBottom newFlipperBottom"><div>0</div></div>
                <div class="flipperBottom flipping"><div>0</div></div>
            </div>
            <div class="flipper" id="flipper2">
                <div class="flipperTop newFlipperTop"><div>0</div></div>
                <div class="flipperTop"><div>0</div></div>
                <div class="flipperBottom newFlipperBottom"><div>0</div></div>
                <div class="flipperBottom flipping"><div>0</div></div>
            </div>

            <div class="flipperDiv">:</div>

            <div class="flipper" id="flipper3">
                <div class="flipperTop newFlipperTop"><div>0</div></div>
                <div class="flipperTop"><div>0</div></div>
                <div class="flipperBottom newFlipperBottom"><div>0</div></div>
                <div class="flipperBottom flipping"><div>0</div></div>
            </div>
            <div class="flipper" id="flipper4">
                <div class="flipperTop newFlipperTop"><div>0</div></div>
                <div class="flipperTop"><div>0</div></div>
                <div class="flipperBottom newFlipperBottom"><div>0</div></div>
                <div class="flipperBottom flipping"><div>0</div></div>
            </div>

            <div class="flipperDiv">&#8196</div>

            <div class="flipper" id="flipper5" style="--card-width: 80px; --card-height: calc(var(--card-width) * 1.5);">
                <div class="flipperTop newFlipperTop"><div>0</div></div>
                <div class="flipperTop"><div>0</div></div>
                <div class="flipperBottom newFlipperBottom"><div>0</div></div>
                <div class="flipperBottom flipping"><div>0</div></div>
            </div>
            <div class="flipper" id="flipper6" style="--card-width: 80px; --card-height: calc(var(--card-width) * 1.5);">
                <div class="flipperTop newFlipperTop"><div>0</div></div>
                <div class="flipperTop"><div>0</div></div>
                <div class="flipperBottom newFlipperBottom"><div>0</div></div>
                <div class="flipperBottom flipping"><div>0</div></div>
            </div>
        </div>
    </div>

    <script>
        let value = 0;
        setInterval(() => {
            const date = new Date()
            const seconds = date.getSeconds().toString();
            const minutes = date.getMinutes().toString();
            const hours = date.getHours().toString();
            
            updateFlipperSet('flipper5', 'flipper6', seconds);
            updateFlipperSet('flipper3', 'flipper4', minutes);
            updateFlipperSet('flipper1', 'flipper2', hours);
        }, 1000);

        function updateFlipperSet(id, id2, value){
            const ones = value.charAt(value.length -1);
            const tenths = value.length > 1 ? value.charAt(0) : 0;

            if (tenths != getCurrentFlipperVal(id))
                changeFlipperNum(id, tenths);
            if (ones != getCurrentFlipperVal(id2))
                changeFlipperNum(id2, ones);
        }

        function changeFlipperNum(id, num){
            const flipper = document.getElementById(id);

            const flipperTop = flipper.children[1];
            const flipperBottom = flipper.lastElementChild;
            const flipperNewTop = flipper.firstElementChild;
            const flipperNewBottom = flipper.children[2];
            
            flipperNewTop.firstElementChild.innerText = num;
            flipperTop.classList.add('flipping');
            flipperBottom.classList.remove('flipping');

            flipperNewBottom.classList.add('flipping');
            setTimeout(() => {
                flipperTop.firstElementChild.innerText = num;
                flipperTop.classList.remove('flipping');
                flipperBottom.classList.add('flipping');
                
                flipperBottom.firstElementChild.innerText = num;
            }, 250);
            setTimeout(() => {
                flipperNewBottom.firstElementChild.innerText = num
                flipperNewBottom.classList.remove('flipping');
            }, 500);
        }

        function getCurrentFlipperVal(id){
            const flipperNewTop = document.getElementById(id).firstElementChild;
            return flipperNewTop.firstElementChild.innerText;
        }
    </script>
</body>
</html>